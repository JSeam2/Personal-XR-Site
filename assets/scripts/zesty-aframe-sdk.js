(()=>{var e={206:(e,t,n)=>{e.exports=n(57)},387:(e,t,n)=>{"use strict";var r=n(485),s=n(570),a=n(940),i=n(581),o=n(574),c=n(845),u=n(338),l=n(524);e.exports=function(e){return new Promise((function(t,n){var p=e.data,d=e.headers,f=e.responseType;r.isFormData(p)&&delete d["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var m=e.auth.username||"",g=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";d.Authorization="Basic "+btoa(m+":"+g)}var y=o(e.baseURL,e.url);function b(){if(h){var r="getAllResponseHeaders"in h?c(h.getAllResponseHeaders()):null,a={data:f&&"text"!==f&&"json"!==f?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:r,config:e,request:h};s(t,n,a),h=null}}if(h.open(e.method.toUpperCase(),i(y,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,"onloadend"in h?h.onloadend=b:h.onreadystatechange=function(){h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))&&setTimeout(b)},h.onabort=function(){h&&(n(l("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){n(l("Network Error",e,null,h)),h=null},h.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var w=(e.withCredentials||u(y))&&e.xsrfCookieName?a.read(e.xsrfCookieName):void 0;w&&(d[e.xsrfHeaderName]=w)}"setRequestHeader"in h&&r.forEach(d,(function(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete d[t]:h.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),f&&"json"!==f&&(h.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){h&&(h.abort(),n(e),h=null)})),p||(p=null),h.send(p)}))}},57:(e,t,n)=>{"use strict";var r=n(485),s=n(875),a=n(29),i=n(941);function o(e){var t=new a(e),n=s(a.prototype.request,t);return r.extend(n,a.prototype,t),r.extend(n,t),n}var c=o(n(141));c.Axios=a,c.create=function(e){return o(i(c.defaults,e))},c.Cancel=n(132),c.CancelToken=n(603),c.isCancel=n(475),c.all=function(e){return Promise.all(e)},c.spread=n(739),c.isAxiosError=n(835),e.exports=c,e.exports.default=c},132:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},603:(e,t,n)=>{"use strict";var r=n(132);function s(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}s.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},s.source=function(){var e;return{token:new s((function(t){e=t})),cancel:e}},e.exports=s},475:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},29:(e,t,n)=>{"use strict";var r=n(485),s=n(581),a=n(96),i=n(630),o=n(941),c=n(144),u=c.validators;function l(e){this.defaults=e,this.interceptors={request:new a,response:new a}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=o(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&c.assertOptions(t,{silentJSONParsing:u.transitional(u.boolean,"1.0.0"),forcedJSONParsing:u.transitional(u.boolean,"1.0.0"),clarifyTimeoutError:u.transitional(u.boolean,"1.0.0")},!1);var n=[],r=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var s,a=[];if(this.interceptors.response.forEach((function(e){a.push(e.fulfilled,e.rejected)})),!r){var l=[i,void 0];for(Array.prototype.unshift.apply(l,n),l=l.concat(a),s=Promise.resolve(e);l.length;)s=s.then(l.shift(),l.shift());return s}for(var p=e;n.length;){var d=n.shift(),f=n.shift();try{p=d(p)}catch(e){f(e);break}}try{s=i(p)}catch(e){return Promise.reject(e)}for(;a.length;)s=s.then(a.shift(),a.shift());return s},l.prototype.getUri=function(e){return e=o(this.defaults,e),s(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(o(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(o(r||{},{method:e,url:t,data:n}))}})),e.exports=l},96:(e,t,n)=>{"use strict";var r=n(485);function s(){this.handlers=[]}s.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},s.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},s.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=s},574:(e,t,n)=>{"use strict";var r=n(642),s=n(288);e.exports=function(e,t){return e&&!r(t)?s(e,t):t}},524:(e,t,n)=>{"use strict";var r=n(953);e.exports=function(e,t,n,s,a){var i=new Error(e);return r(i,t,n,s,a)}},630:(e,t,n)=>{"use strict";var r=n(485),s=n(212),a=n(475),i=n(141);function o(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return o(e),e.headers=e.headers||{},e.data=s.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||i.adapter)(e).then((function(t){return o(e),t.data=s.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return a(t)||(o(e),t&&t.response&&(t.response.data=s.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},953:e=>{"use strict";e.exports=function(e,t,n,r,s){return e.config=t,n&&(e.code=n),e.request=r,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},941:(e,t,n)=>{"use strict";var r=n(485);e.exports=function(e,t){t=t||{};var n={},s=["url","method","data"],a=["headers","auth","proxy","params"],i=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],o=["validateStatus"];function c(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function u(s){r.isUndefined(t[s])?r.isUndefined(e[s])||(n[s]=c(void 0,e[s])):n[s]=c(e[s],t[s])}r.forEach(s,(function(e){r.isUndefined(t[e])||(n[e]=c(void 0,t[e]))})),r.forEach(a,u),r.forEach(i,(function(s){r.isUndefined(t[s])?r.isUndefined(e[s])||(n[s]=c(void 0,e[s])):n[s]=c(void 0,t[s])})),r.forEach(o,(function(r){r in t?n[r]=c(e[r],t[r]):r in e&&(n[r]=c(void 0,e[r]))}));var l=s.concat(a).concat(i).concat(o),p=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===l.indexOf(e)}));return r.forEach(p,u),n}},570:(e,t,n)=>{"use strict";var r=n(524);e.exports=function(e,t,n){var s=n.config.validateStatus;n.status&&s&&!s(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},212:(e,t,n)=>{"use strict";var r=n(485),s=n(141);e.exports=function(e,t,n){var a=this||s;return r.forEach(n,(function(n){e=n.call(a,e,t)})),e}},141:(e,t,n)=>{"use strict";var r=n(485),s=n(446),a=n(953),i={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c,u={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(c=n(387)),c),transformRequest:[function(e,t){return s(t,"Accept"),s(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(o(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(0,JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,s=t&&t.forcedJSONParsing,i=!n&&"json"===this.responseType;if(i||s&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw a(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){u.headers[e]=r.merge(i)})),e.exports=u},875:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},581:(e,t,n)=>{"use strict";var r=n(485);function s(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var a;if(n)a=n(t);else if(r.isURLSearchParams(t))a=t.toString();else{var i=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),i.push(s(t)+"="+s(e))})))})),a=i.join("&")}if(a){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}},288:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},940:(e,t,n)=>{"use strict";var r=n(485);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,s,a,i){var o=[];o.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),r.isString(s)&&o.push("path="+s),r.isString(a)&&o.push("domain="+a),!0===i&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},642:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},835:e=>{"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},338:(e,t,n)=>{"use strict";var r=n(485);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function s(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=s(window.location.href),function(t){var n=r.isString(t)?s(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},446:(e,t,n)=>{"use strict";var r=n(485);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},845:(e,t,n)=>{"use strict";var r=n(485),s=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,a,i={};return e?(r.forEach(e.split("\n"),(function(e){if(a=e.indexOf(":"),t=r.trim(e.substr(0,a)).toLowerCase(),n=r.trim(e.substr(a+1)),t){if(i[t]&&s.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([n]):i[t]?i[t]+", "+n:n}})),i):i}},739:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},144:(e,t,n)=>{"use strict";var r=n(843),s={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){s[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var a={},i=r.version.split(".");function o(e,t){for(var n=t?t.split("."):i,r=e.split("."),s=0;s<3;s++){if(n[s]>r[s])return!0;if(n[s]<r[s])return!1}return!1}s.transitional=function(e,t,n){var s=t&&o(t);function i(e,t){return"[Axios v"+r.version+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,o){if(!1===e)throw new Error(i(r," has been removed in "+t));return s&&!a[r]&&(a[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,o)}},e.exports={isOlderVersion:o,assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),s=r.length;s-- >0;){var a=r[s],i=t[a];if(i){var o=e[a],c=void 0===o||i(o,a,e);if(!0!==c)throw new TypeError("option "+a+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+a)}},validators:s}},485:(e,t,n)=>{"use strict";var r=n(875),s=Object.prototype.toString;function a(e){return"[object Array]"===s.call(e)}function i(e){return void 0===e}function o(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==s.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===s.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),a(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===s.call(e)},isBuffer:function(e){return null!==e&&!i(e)&&null!==e.constructor&&!i(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:o,isPlainObject:c,isUndefined:i,isDate:function(e){return"[object Date]"===s.call(e)},isFile:function(e){return"[object File]"===s.call(e)},isBlob:function(e){return"[object Blob]"===s.call(e)},isFunction:u,isStream:function(e){return o(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function e(){var t={};function n(n,r){c(t[r])&&c(n)?t[r]=e(t[r],n):c(n)?t[r]=e({},n):a(n)?t[r]=n.slice():t[r]=n}for(var r=0,s=arguments.length;r<s;r++)l(arguments[r],n);return t},extend:function(e,t,n){return l(t,(function(t,s){e[s]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},843:e=>{"use strict";e.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}(()=>{"use strict";var e=n(206);const t=t=>"ipfs"===t.substring(0,4)?`https://ipfs.zesty.market/ipfs/${t.substring(7)}`:"http"===t.substring(0,4)||"https"===t.substring(0,5)?t:"ar"!==t.substring(0,2)?`https://ipfs.zesty.market/ipfs/${t}`:void e.get(`https://arweave.net/${t.substring(5)}`).then((e=>e.url)).catch((e=>{console.error(e)})),r=()=>{const e=[{gateway:"https://cloudflare-ipfs.com",weight:35},{gateway:"https://gateway.pinata.cloud",weight:35},{gateway:"https://dweb.link",weight:30}],t=[];let n;for(n=0;n<e.length;n++)t[n]=e[n].weight+(t[n-1]||0);const r=Math.random()*t[t.length-1];for(n=0;n<t.length&&!(t[n]>r);n++);return e[n].gateway},s=()=>{const e=null!=window.XRHand&&null!=window.XRMediaBinding,t=navigator.userAgent.includes("OculusBrowser"),n=e&&t?"Full":e||t?"Partial":"None";return{match:"None"!==n,confidence:n}},a=()=>{const e=null!=window.mozInnerScreenX&&null==window.speechSynthesis,t=navigator.userAgent.includes("Mobile VR")&&!navigator.userAgent.includes("OculusBrowser"),n=e&&t?"Full":e||t?"Partial":"None";return{match:"None"!==n,confidence:n}},i=async()=>{const e=await navigator.xr.isSessionSupported("immersive-vr")&&await navigator.xr.isSessionSupported("immersive-ar"),t=navigator.userAgent.includes("Pico Neo 3 Link"),n=e&&t?"Full":e||t?"Partial":"None";return{match:"None"!==n,confidence:n}},o=()=>{const e=0===navigator.maxTouchPoints||0===navigator.msMaxTouchPoints,t=!navigator.userAgent.includes("Android")&&!navigator.userAgent.includes("Mobile"),n=e&&t?"Full":e||t?"Partial":"None";return{match:"None"!==n,confidence:n}},c=async()=>{let e={platform:"",confidence:""};return e=s().match?{platform:"Oculus",confidence:s().confidence}:a().match?{platform:"Wolvic",confidence:a().confidence}:await i().match?{platform:"Pico",confidence:await i().confidence}:o().match?{platform:"Desktop",confidence:o().confidence}:{platform:"Unknown",confidence:"None"},e},u={tall:{width:.75,height:1,style:{standard:`${r()}/ipns/lib.zesty.market/assets/zesty-banner-tall.png`,minimal:`${r()}/ipns/lib.zesty.market/assets/zesty-banner-tall-minimal.png`,transparent:`${r()}/ipns/lib.zesty.market/assets/zesty-banner-tall-transparent.png`}},wide:{width:4,height:1,style:{standard:`${r()}/ipns/lib.zesty.market/assets/zesty-banner-wide.png`,minimal:`${r()}/ipns/lib.zesty.market/assets/zesty-banner-wide-minimal.png`,transparent:`${r()}/ipns/lib.zesty.market/assets/zesty-banner-wide-transparent.png`}},square:{width:1,height:1,style:{standard:`${r()}/ipns/lib.zesty.market/assets/zesty-banner-square.png`,minimal:`${r()}/ipns/lib.zesty.market/assets/zesty-banner-square-minimal.png`,transparent:`${r()}/ipns/lib.zesty.market/assets/zesty-banner-square-transparent.png`}}},l="square",p="standard",d="https://beacon2.zesty.market/zgraphql",f={matic:"https://api.thegraph.com/subgraphs/name/zestymarket/zesty-market-graph-matic",polygon:"https://api.thegraph.com/subgraphs/name/zestymarket/zesty-market-graph-matic",rinkeby:"https://api.thegraph.com/subgraphs/name/zestymarket/zesty-market-graph-rinkeby"},h={uri:void 0},m={name:"Default banner",description:"This is the default banner that would be displayed ipsum",image:"https://ipfs.zesty.market/ipfs/QmWBNfP8roDrwz3XQo4qpu9fMxvUSTn8LB7d4JK7ybrfZ2/assets/zesty-ad-square.png",url:"https://www.zesty.market"},g=async t=>{const{platform:n,confidence:r}=await c();try{await e.post(d,{query:`mutation { increment(eventType: session, spaceId: ${t}, platform: { name: ${n}, confidence: ${r} }) { message } }`},{headers:{"Content-Type":"application/json"}})}catch(e){console.log(`Failed to emit ${eventType} analytics`,e.message)}};function y(e,t){const n=t[0],r=t[1],s=t[2],a=t[3],i=t[4],o=t[5],c=t[6],u=t[7],l=t[8],p=t[9],d=t[10],f=t[11],h=t[12],m=t[13],g=t[14],y=t[15],b=n*o-r*i,w=n*c-s*i,v=n*u-a*i,x=r*c-s*o,k=r*u-a*o,E=s*u-a*c,j=l*m-p*h,A=l*g-d*h,T=l*y-f*h,S=p*g-d*m,O=p*y-f*m,C=d*y-f*g;let P=b*C-w*O+v*S+x*T-k*A+E*j;return P?(P=1/P,e[0]=(o*C-c*O+u*S)*P,e[1]=(s*O-r*C-a*S)*P,e[2]=(m*E-g*k+y*x)*P,e[3]=(d*k-p*E-f*x)*P,e[4]=(c*T-i*C-u*A)*P,e[5]=(n*C-s*T+a*A)*P,e[6]=(g*v-h*E-y*w)*P,e[7]=(l*E-d*v+f*w)*P,e[8]=(i*O-o*T+u*j)*P,e[9]=(r*T-n*O-a*j)*P,e[10]=(h*k-m*v+y*b)*P,e[11]=(p*v-l*k-f*b)*P,e[12]=(o*A-i*S-c*j)*P,e[13]=(n*S-r*A+s*j)*P,e[14]=(m*w-h*x-g*b)*P,e[15]=(l*x-p*w+d*b)*P,e):null}function b(e){const t=document.querySelector("[camera]");t&&t.components&&t.components.camera&&t.components.camera.camera?e(t.components.camera.camera):setTimeout((function(){b(e)}),2e3)}const w=async function(){return new Promise((e=>{b((t=>{e(t)}))}))}(),v=new THREE.Frustum,x=new THREE.Matrix4,k=new THREE.Box3,E=new THREE.Vector3,j=new THREE.Vector3;async function A(n,r,i,o,g,y,b){const w=document.querySelector("a-scene");let v=w.querySelector("a-assets");v||(v=document.createElement("a-assets"),w.appendChild(v));const x=async function(n,r,s,a){const i=await(async(t,n="polygon")=>{const r=Math.floor(Date.now()/1e3);return e.post(f[n],{query:`\n      query {\n        tokenDatas (\n          where: {\n            id: "${t}"\n          }\n        )\n        {\n          sellerNFTSetting {\n            sellerAuctions (\n              first: 5\n              where: {\n                contractTimeStart_lte: ${r}\n                contractTimeEnd_gte: ${r}\n                cancelled: false\n              }\n            ) {\n              id\n              buyerCampaigns {\n                id\n                uri\n              }\n              buyerCampaignsApproved\n              buyerCampaignsIdList\n            }\n          }\n          id\n        }\n      }\n    `}).then((e=>(e=>{if(200!=e.status)return h;let t=e.data.data.tokenDatas[0]?.sellerNFTSetting?.sellerAuctions,n=null;return t?.[0]?.buyerCampaignsApproved?.find(((e,r)=>{if(e){const e=t[0].buyerCampaignsIdList[r];n=t[0].buyerCampaigns.find((t=>t.id===e))}})),null==n?h:n})(e))).catch((e=>(console.log(e),h)))})(n,r),o=await(async(n,r,s,a,i)=>{if(!n){let e={uri:"DEFAULT_URI",data:m},t=r||l,n=s||p,a=i||u;return e.data.image=a[t].style[n],e}return e.get(t(n)).then((e=>{var t;return-1===(t=e.data.url).indexOf("utm_source=")&&-1===t.indexOf("utm_campaign=")&&-1===t.indexOf("utm_channel=")&&(e.data.url=((e,t)=>{let n=new URL(e);return n.searchParams.set("utm_source","ZestyMarket"),n.searchParams.set("utm_campaign","ZestyCampaign"),n.searchParams.set("utm_channel",`SpaceId_${t}`),n.href})(e.data.url,a)),200==e.status?{uri:n,data:e.data}:null}))})(i.uri,s,a,n);let c=o.data.url;c=c.match(/^http[s]?:\/\//)?c:"https://"+c;let d=o.data.image;d=d.match(/^.+\.(png|jpe?g)/i)?d:t(d);const g=document.createElement("img");return g.setAttribute("id",o.uri+Math.random()),g.setAttribute("crossorigin",""),o.data.image?(g.setAttribute("src",d),new Promise(((e,t)=>{g.onload=()=>e({img:g,uri:o.uri,url:c}),g.onerror=()=>t(new Error("img load error"))}))):{id:"blank"}}(r,i,o,g).then((e=>(e.img&&v.appendChild(e.img),"https://www.zesty.market"===e.url&&(e.url=`https://app.zesty.market/space/${r}`),e)));x.then((t=>{if(!1!==n.getAttribute("visible")){const i=document.createElement("a-plane");t.img?(i.setAttribute("src",`#${t.img.id}`),i.setAttribute("width",u[o].width*y),i.setAttribute("height",y),i.setAttribute("transparent","true"),i.setAttribute("shader","flat")):i.setAttribute("material","opacity: 0"),i.setAttribute("side","double"),i.setAttribute("class","clickable"),b&&(async t=>{const{platform:n,confidence:r}=await c();try{const s=`https://beacon.zesty.market/api/v1/space/${t}`;await e.put(s),await e.post(d,{query:`mutation { increment(eventType: visits, spaceId: "${t}", platform: { name: ${n}, confidence: ${r} }) { message } }`},{headers:{"Content-Type":"application/json"}})}catch(e){console.log("Failed to emit onload event",e.message)}})(r),i.onclick=async()=>{const n=document.querySelector("a-scene");await n.exitVR(),t.url&&((e=>{if(e){if(s().match){if(e.includes("https://www.oculus.com/experiences/quest/"))return void setTimeout((()=>{window.open(e,"_blank")}),1e3)}else if(a().match){const t=document.createElement("div"),n=document.createElement("div"),r=document.createElement("p"),s=document.createElement("button"),a=document.createElement("button");return t.style.backgroundColor="rgb(0, 0, 0, 0.75)",t.style.color="white",t.style.textAlign="center",t.style.position="fixed",t.style.top="50%",t.style.left="50%",t.style.padding="5%",t.style.borderRadius="5%",t.style.transform="translate(-50%, -50%)",r.innerHTML=`<b>This billboard leads to ${e}. Continue?</b>`,s.innerText="Move cursor back into window.",s.style.width="100vw",s.style.height="100vh",s.onmouseenter=()=>{s.style.width="auto",s.style.height="auto",s.innerText="Yes"},s.onclick=()=>{window.open(e,"_blank"),t.remove()},a.innerText="No",a.onclick=()=>{t.remove()},t.append(n),n.append(r),n.append(s),n.append(a),void document.body.append(t)}window.open(e,"_blank")}})(t.url),b&&(async t=>{const{platform:n,confidence:r}=await c();try{const s=`https://beacon.zesty.market/api/v1/space/click/${t}`;await e.put(s),await e.post(d,{query:`mutation { increment(eventType: clicks, spaceId: "${t}", platform: { name: ${n}, confidence: ${r} }) { message } }`},{headers:{"Content-Type":"application/json"}})}catch(e){console.log("Failed to emit onclick event",e.message)}})(r))},n.appendChild(i),n.bannerURI=t.uri,n.imgSrc=t.img.src,n.url=t.cta}}))}AFRAME.registerComponent("visibility-check",{init:function(){this.object=this.el.object3D,w.then((e=>{this.camera=e})),this.sceneEl=document.querySelector("a-scene"),this.scene=this.sceneEl.object3D,this.ad=this.el.components["zesty-ad"],this.lastVisible=null,this.durationThreshold=1e4,this.throttledFunction=AFRAME.utils.throttle(this.check,500,this)},tick:function(){this.throttledFunction()},check:function(){const e=function(e,t,n){if(!t||!n.camera)return!1;if(n.is("vr-mode")){const t=n.renderer.xr.getCameraPose().transform.position;return n.camera.parent.getWorldPosition(E),E.x+=t.x,E.y+=t.y,E.z+=t.z,e.getWorldPosition(j),j.distanceTo(E)}return t.getWorldPosition(E),e.getWorldPosition(j),j.distanceTo(E)}(this.object,this.camera,this.sceneEl),t=function(e,t,n){if(!t||!n.camera)return!1;if(n.is("vr-mode")){const t=n.renderer.xr.getCameraPose();let r=t.transform.matrix;n.camera.parent.getWorldPosition(E),r[12]+=E.x,r[13]+=E.y,r[14]+=E.z,r={elements:y(r,r)};const s={elements:t.views[0].projectionMatrix};return x.multiplyMatrices(s,r),v.setFromProjectionMatrix?v.setFromProjectionMatrix(x):v.setFromMatrix(x),k.setFromObject(e),e.center||(e.center=new THREE.Vector3),k.getCenter(e.center),v.containsPoint(e.center)}{const n=t;return x.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),v.setFromProjectionMatrix?v.setFromProjectionMatrix(x):v.setFromMatrix(x),k.setFromObject(e),e.center||(e.center=new THREE.Vector3),k.getCenter(e.center),v.containsPoint(e.center)}}(this.object,this.camera,this.sceneEl)&&e<15;if(!this.lastVisible&&t)this.lastVisible=(new Date).getTime();else if(this.lastVisible){const e=(new Date).getTime()-this.lastVisible;(!t||e>this.durationThreshold)&&((new Date).getTime(),this.lastVisible,this.lastVisible=null,this.object.id)}}}),console.log("Zesty SDK Version: ","1.6.0"),AFRAME.registerComponent("zesty-banner",{data:{},schema:{adSpace:{type:"string"},space:{type:"string"},creator:{type:"string"},network:{type:"string",default:"polygon",oneOf:["matic","polygon","rinkeby"]},adFormat:{type:"string",oneOf:["tall","wide","square"]},format:{type:"string",oneOf:["tall","wide","square"]},style:{type:"string",default:p,oneOf:["standard","minimal"]},height:{type:"float",default:1},beacon:{type:"boolean",default:!0}},init:function(){this.data.creator&&console.warn("'creator' is no longer a required property of the Zesty Banner and can be omitted."),this.tick=AFRAME.utils.throttleTick(this.tick,3e4,this),this.registerEntity()},registerEntity:function(){const e=this.data.space?this.data.space:this.data.adSpace,t=(this.data.format?this.data.format:this.data.adFormat)||l;A(this.el,e,this.data.network,t,this.data.style,this.data.height,this.data.beacon)},tick:function(){this.data.space&&g(this.data.space)}}),AFRAME.registerComponent("zesty-ad",{data:{},schema:{adSpace:{type:"string"},space:{type:"string"},creator:{type:"string"},network:{type:"string",default:"polygon",oneOf:["matic","polygon","rinkeby"]},adFormat:{type:"string",oneOf:["tall","wide","square"]},format:{type:"string",oneOf:["tall","wide","square"]},style:{type:"string",default:p,oneOf:["standard","minimal"]},height:{type:"float",default:1},beacon:{type:"boolean",default:!0}},init:function(){this.data.creator&&console.warn("'creator' is no longer a required property of the Zesty Banner and can be omitted."),this.tick=AFRAME.utils.throttleTick(this.tick,3e4,this),this.registerEntity()},registerEntity:function(){const e=this.data.space?this.data.space:this.data.adSpace,t=(this.data.format?this.data.format:this.data.adFormat)||l;A(this.el,e,this.data.network,t,this.data.style,this.data.height,this.data.beacon)},tick:function(){this.data.space&&g(this.data.space)}}),AFRAME.registerPrimitive("a-zesty",{defaultComponents:{"zesty-banner":{space:""},"visibility-check":{}}})})()})();